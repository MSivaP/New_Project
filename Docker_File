---------
How to run the container with port number.

docker run -d -P httpd:latest

----------
How to run the container with customize port

docker run -d -p 1234:80 httpd:latest


docker run -d tomcat:latest sleep 20

-----------------------

How to build a docker image with manul process?

Step 1: Take base image from the docker hub.
docker pull tomcat:latest

Step 2: Run this container 

docker run -d tomcat:latest

Step 3: Login to the container 

docker exec -it contid /bin/bash

Step 4: log out the container

Step 5: Ensure the container is running. commit the container chagnes to get the new image.

Command : 
docker commit -m "anymsg" contid "newimagename":"tag"

docker commit -m "new app" 2fafb0278d0b app:v1
--------------------

How to build a docker image with Automate process?

Automated process ---we will wirte ta script called "docker file"

--docker file is a plain test file without any extension.
--we will use some pre defined docker file instruction given by docker.
ex : FROM / RUN / COPY etc.
-- All docker file instructions are single words only.
-- docker file instructions words have to written in captial letters.
-- Every line in a docer file must start with docker file instructions only.

FROM tomcat:8.5.46
##FROM is the pre defined docker file instruction
## FROM is used to set the base image in a docker file
## FROM instruction above will download the image run it as container.Enter into the container.

RUN cd webapps/ ; wget
RUN cd webapps/; wget

##RUN is the predefined docker file instaruction
## it is used to execute the series of commands on top the base image/container during the image build process. 


Command :  docker build --file <docker file Name> --tag <image name>:<tag>  /home/root


COPY ---- 
COPY argument is one of the docker.
COPY SOURCEPATH DESTINATIONPATH

ENV 
CMD 
CMD is used to tell the docker how to start/stop  process when we run the containder from image

EXPOSE 

EXPOSE is used to tell docker what is the port number of the application /software we installed
Ex : EXPOSE 8080

----------------------------


DOCKER VOLUMES :

--- Helps you to attach an external sotrage to container.
--- Helps to persist the data generated by container.

How to check the docker volume
docker volume ls

How to create the docker volume
CMD : docker volume create <volume name>
Ex : docker volume create appdata

How to check the docker volume
CMD : docker volume inspect <docker volume name>
Ex : docker volume inspect appdata

How to create container  with volume

docker run -d -P --mount type=volume,src=<volume name>,target=<Container Logs Path> apache:latest

docker run -d -P --mount type=volume,src=myapp,target=/var/log/nginx 18fcdc7d413f

How to create the customized logs path.

Step 1: Create the directory.
Step 2: Attach the docker volume with container.

docker run -d -P --mount type=bind,src=<volume name>,target=<Container Logs Path> apache:latest

docker run -d -P --mount type=bind,src=<volume name>,target=<Container Logs Path> --mount type=volume,src=<volume name>,target=<Container Logs Path>apache:latest

How to delete the Volume Name?
CMD : docker volume rn <volume Name>

===============================

How to listout docker network
 CMD : docker network ls

CMD : docker network inspect bridge



CMD : docker inspect <container name>
docker exec <con name> ping <container 2 ip>

How to create the container with specific network.
CMD : docker run -d --name cont3 --network <name of the network> httpd:latest


How to get the container ip.

CMD : docker exec <container name> hostname -i

Howto create multiple container from given image?

ans : we need to automate

docker compose is a tool that helps to run multiple containers from the given image with a single command.Rather creating cont from command line commands wirete a script and execute with all the config

we will also write a script called docker compose file to create multiple containers

we will use YAML to write the docker compose file

docker compose file can be exectuted with docker compose/command only

------------------

How to run mltiple cont from multiple images into multiple servers/vm
Using container orachestration tools.


Container Orachestration Tools :

---Helps to deploy the containers across the multiple server /vm/cluster
--- Helps in managing the dynamic nature of the container.
--- Provides vaious benefits
      --- Requesting routing into multiple cont for highest availablity
      --- provides desired state / auto healing
      --- scale up /down across the multiple server /vms / cluster

Multiple continer orchestration tools

-- Docker swarm ---  is from the docker org & it free.
-- Kubernetes --- open source


In a container orachestration cluster we have at least 2 vms.

1. VM/server/ec-2 -- we will use the manager /master vm (can have multiple master)
   --- purpose of the master/manager
        --- manage team / assing the work
        --- is reponsible for creating containers across the vms & manage them.
    
2.VM /server /ec2 - we will use the worker node vm (can  have h number of workers)

   --- purpose of the worker vm /node
        --- Listen to the manger
        --- Execute the work /run the containers

Docker Swarm :

--- is a cluster with at least one master node /one worker node
---- Cluster is the group of the servers
--- Container orchestration feature is part of the docker software.

How to build the docker swarm?
Step 1: Create 3 ec2/vm server
One is master node
Two are the worker nodes
Step 2: Install the docker packge all the server.
apt-get install docker
Step 3: Get the information about docker
CMD : docker info 
Here will get the docker information.In the information Swarm:inactive
Step 4: We need run below command in the master node.Then 
CMD : docker swarm init 

--- Which ever the vm you run the above command that vm will start the acting as master node/manager vm

--- Which ever the vm your run the docker swarm join that vm will start the acting as worker node.

Once run the above command to get the docker swarm join token key.Run the this token key in worker node.

Step 5: Run the token key command in the worker node.

Note : How regenarate token key 
CMD : docker swarm join-token worker
Step 6: List out the worker node list in the master node.
CMD : docker node ls

Step 7: Run the container in the master then automatically this container run in the worker node also.

Master node will act as a to manage the containers in worker nodes.

CMD : 

docker service create --name <docker service name> --replicas <no.of container> - p <host port>:<port> image name

Ex : 

docker service create --name myapp  --replicas 5 - p 9080:3000 leandeopvs/samples:pyapp-v1
 
How to listout docker service 
docker service ls

Step 8: to check the particular docker service name.
docker service ps <servicename>

How to scale up and scale down

CMD : docker service scale servicename:no.of worker nodes
Ex : docker service scale myapp:10
